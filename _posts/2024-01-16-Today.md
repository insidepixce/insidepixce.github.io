---
pin: true
layout: post
title: "프로퍼티 어트리뷰트 "
categories:
  - javascript
tags:
  - javascript
author: insidepixce
show_excerpts: true
date: 2024-01-16 21:27:00 +0900
disqus: true
paginate: true
disqus-count-scr: true
comments: true
toc: true
---

# 20230116 : 프로퍼티 어트리뷰트

# 제일 먼저 개념 잡고가기 - 프로퍼티

프로퍼티는 객체 내에서 객체의 상태를 나타내는 특징적인 특성을 의미한다

객체 지향 프로그래밍에서 객체는 데이터와 그 데이터를 조작하는 동작 (메서드)를 함께 포하하는 개념적인 단위

객체의 데이터는 프로퍼티로 표현되고 그 동작은 메서드로 표현된다

KEY값과 VALUE값으로 구성되며 키는 일반적으로 문자열이나 심볼이 된다. 값은 어떤 데이터 타입이여도 가능.

이렇게 객체 내에서 프로퍼티는 객체의 상태나 특성을 나타내며 프로퍼티의 값은 해당 상태의 실제 데이터를 담고 있다.

```jsx
// 객체 생성
let person = {};

// 프로퍼티 추가
person.name = 'John';
person.age = 30;

// 프로퍼티 접근
console.log(person.name); // 출력: John
console.log(person.age);  // 출력: 30
```

위의 예제에서 `name`과 `age`는 `person` 객체의 프로퍼티이다.

객체는 이러한 프로퍼티들의 집합이며, 프로퍼티들은 해당 객체의 특징과 데이터를 정의한다 

# 16.1 내부 슬롯과 내부 메서드

## 1. 개념 정리하기

→ 자바스크립트 엔진의 구현 알고리즘을 설명하기 위해 ECMAScript 사양에서 사용

→  의사 프로퍼티와 의사 메서드

→ 이중 대괄호로 감싼 이름들이 내부 슬롯과 내부 매서드이다 

## 2. 내부 슬롯

객체의 내부 상태를 나타냄 

→ 언어 자체의 구현을 위해 사용되며, javascript 코드에서 직접적으로 접근하거나 조작할 수 없다ㅣ 

→ 내부 상태 및 동작을 유지하고 제어하는 데 사용됨

ex) `[[Prototype]]` ,`[[Extensible]]` 같은 속성들이 내부 슬롯에 해당됨

```jsx
console.log(Object.getPrototypeOf(obj)); 
```

결과로는 [Object: null prototype]이 출력된다. 

→ 빈 객체 `obj` 를 생성하고 그 객체의 프로토타입을 출력하는 코드이다. 

실행 결과로는 `object.prototype` 에 대한 정보가 나온다.

빈 객체의 경우, 이 객체는 기본적으로 `object.prototpye` 을 상속하므로 결과로는  `[object : null prototype]` 가 출력된다. 

### 🤵🏻 잠깐, 프로토타입이 뭐냐고?

→ 자바스크립트에서 객체지향 프로그래밍의 핵심 개념 중 하나이다.

→ 객체는 다른 객체로부터 상속 받을 수 있는데, 이때 상속을 받는 객체를 “프로토타입 객체”라고 한다

### ⛓️ **프로토타입 체인**

- 모든 객체는 프로토타입을 가진다
- 객체의 프로토타입은 다른 객체이며, 이 객체 또한 자신의 프로토타입을 가질 수 있다.
- 이런식으로 여러 객체가 연결된 구조를 프로토타입 체인이라고 한다

### 🌐 **프로토타입 객체**

- 모든 객체는 자체 속성 및 메서드를 가진다
- 이를 프로토타입 객체라고 한다
- 객체를 생성할 때마다 해당 객체의 프로토타입이 결정된다
- 객체의 프로토타입은 다른 객체이며 이로 인해 상속 관계가 형성된다

<aside>
💡 즉, 프로토타입이란 객체 간에 상속을 구현하는 매커니즘

</aside>

## 3. 내부 메서드

객체의 내부 동작을 정의하는 메서드로, 주로 스펙에서 언급되는 추상 연산에 대응된다

이러한 내부 메서드는 특정 객체 타입이나 기능에 따라 어떻게 동작해야 하는질ㄹ 규정한다 

```jsx
let obj = { key: 'value' };
console.log(obj.key); // 내부 메서드 [[Get]] 호출
obj.key = 'new value'; // 내부 메서드 [[Set]] 호출
```

→ 모든 객체는 내부 메서드인 `[[GET]]`및 `[[SET]]`를 가지고 있어서 속성에 접근하거나 값을 설정할때 호출됨

### ➕ 추상 연산이란?

ECMAScript 스펙에서 언급되는 추상연산이란 특정한 동작을 수행하는데 사용되는 논리적인 단계들의 집합이다.

- 언어의 구현에 대한 명세 제공
- 어떤 기능이나 동작이 어떻게 이루어져야 하는지 정의

→ 추상은 구체적인 구현이나 환경에 의존하지 않고 일반적인 개념적인 수준에서 정의된다는 의미이다. 

1. **ToPrimitive (input [, PreferredType])**: 이 추상 연산은 특정 값의 원시 값 변환을 수행힌다 **`PreferredType`**은 변환되길 원하는 타입을 나타낸다
2. **ToBoolean (argument)**: 이 추상 연산은 특정 값을 불리언 값으로 변환
3. **ToObject (argument)**: 이 추상 연산은 특정 값을 객체로 변환한다 

```jsx
let obj = {
  valueOf: function() {
    return 42;
  },
  toString: function() {
    return "Hello";
  }
};

let result = obj + 1; // ToPrimitive(obj) + 1
console.log(result); // 43
```

이 코드에서 **`+`** 연산자는 "ToPrimitive" 추상 연산을 사용하여 객체 **`obj`**를 원시 값으로 변환한 후에 덧셈함

→ valueOF 메서드가 호출되어 객체를 숫자로 변환하고 최종적으로 42에 1이 더해져 43이라는 결과를 얻음

---

# 16.2 프로퍼티 어트리뷰트와  프로퍼티 디스크립터 객체

## 1. 막혀버린 곳

<aside>
💡 자바스크립트 엔진은 프로퍼티를 생성할 떄 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본

값으로 자동 정의한다 

</aside>

책 보다가 이게 무슨 소리인지 감이 안 잡혔다 

→ 엔진이 객체의 프로퍼티를 생성할 때 , 해당 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 자동으로 기본값으로 정의한다는 것이다 

## 2. 엔진이 프로퍼티를 생성해 내는 과정

### 🖥️ CS관점에서 보는 프로퍼티 생성하기

- **메모리 할당**

객체는 메모리상에 저장되어야 한다. 

- **프로퍼티 초기화**

 프로퍼티를 초기화하려면 메모리에 해당 프로퍼티의 값을 저장해야한다

 이때, 프로퍼티의 이름과 값을 기반으로 메모리에 공간을 확보하고 값을 저장한다

- **프로퍼티 어트리뷰트 설정**

 프로퍼티의 어트리뷰트(예: **`writable`**, **`enumerable`**, **`configurable`**)를 설정한다. 

이러한 정보는 프로퍼티의 동작을 제어하며, 어떻게 다뤄져야 하는지를 나타낸다

- **프로토타입 체인 설정:**

객체의 프로퍼티가 프로토타입 체인에 연결될 경우, 이를 설정한다

이것은 프로퍼티에 직접 접근할 수 없을 때 프로토타입 체인을 따라가며 해당 프로퍼티를 찾을 수 있도록 하는 매커니즘이다 

- **참조(Reference) 반환**

생성된 객체의 참조(메모리 주소 등)를 반환하여 이를 변수에 할당하거나 다른 객체와 관계를 설정한다

### 🙋🏻‍♀️ 프로퍼티를 초기화하려면 해당 프로퍼티의 값을 저장해야 한다며, 왜 그래야 해?

프로퍼티를 초기화하려면 해당 프로퍼티에 값을 할당하고, 이 값을 메모리에 저장해야 한다.

이는 컴퓨터의 메모리는 데이터를 저장하고 유지하기 위한 공간이기 때문이다. 

1. **메모리 할당:** 프로퍼티를 포함하는 객체는 메모리 상의 특정 위치에 저장되며 이 위치에는 객체의 모든 프로퍼티에 대한 정보가 저장된다
2. **프로퍼티 값 저장:** 프로퍼티는 그 값과 함께 메모리에 저장된다.  이 값은 변수의 데이터 타입에 따라 다르게 저장된다. 
예를 들어, 정수, 부동 소수점, 문자열 등의 값을 저장하는 방식이 다를 수 있습다. 
3. **프로퍼티 값에 대한 참조:** 객체 내의 각 프로퍼티에 대한 값은 해당 프로퍼티에 대한 참조로써 사용된다. 
이 참조는 메모리 위치를 나타내고, 프로퍼티에 접근할 때마다 해당 메모리 위치로 이동하여 값을 읽거나 쓰게 된다

아직도 이해가 안 되었다고? 그러면 예시와 함께 봐보자 

- `age` 라는 프로퍼티를 갖는 객체를 생성하고 해당 프로퍼티를 초기화하는 간단한 코드

```jsx
let person = {}; // 객체 생성

// 프로퍼티 초기화
person.age = 25; // 값을 할당하고 해당 값은 메모리에 저장됨
```

이 코드에서 `person` 객체가 메모리에 할당되고 `age`프로퍼티에서는 값 25가 할당되어 메모리에 저장된다

이제 `person.age` 를 참조할 때는 해당 메모리 위치로 이동하여 값을 읽게 된다 

- 프로퍼티 어트리뷰트는 자바스크립트 엔진이 관리하는 내부 상태 값인 내부 슬록이다.
- 직접 접근할 수 없지만 `Object.getOwnPropertyDescriptor` 메서드를 사용하여 간접적으로 확인할 수는 있다
- 첫 번째 매개변수에서는 객체의 참조를 전달한다
- 두 번째 매개변수에는 프로퍼티 키를 문자열로 전달한다
- 이때 `Object.getOwnPropertyDescriptor` 메서드는 프로퍼티 어트리뷰트 정보를 제공하는 프로퍼티 드스크립터 객체를 반환한다.
- 존재하지 않거나 상속받은 프로퍼티에 대한 디스크립터를 실행시 undefined가 반환된다

---

# 16.3.1 데이터 프로퍼티와 접근자 프로퍼티

## 1. 데이터 프로퍼티

키와 값으로 구성된 일반적인 프로퍼티

→ 지금까지 살펴본 모든 프로퍼티는 데이터 프로퍼티

## 2. 데이터 프로퍼티의 프로퍼티 어트리뷰트

### 1. 값 (value)

: 프로퍼티가 가지고 있는 실제 데이터 값 

- 프로퍼티 키를 통해 프로퍼티에 접근하면 반환되는 값
- 프로퍼티 키를 통해 프로퍼티 값을 변경하면 [[VALUE]]에 값을 재할당한다. 이때 프로퍼티가 없으면 프로퍼티를 동적 생성하고 생성된 프로퍼티의 [[VALUE]]값에 저장한다

```jsx
let obj = {
  name: 'John'
};
```

### 2. 쓰기 가능 여부 (Writable)

:프로퍼티의 값을 변경할 수 있는지여부를 나타냄  

- 불리언 값을 가짐
- =[[Writable]]의 값이 false 인 경우 [[Value]]의 값을 변경할 수 없는 읽기 전용 프로퍼티가 된다

```jsx
let obj = {
  name: 'John'
};
Object.defineProperty(obj, 'name', { writable: false });
```

obj.name = 'Jane'; 에러 발생

→ 읽기 전용 프로퍼티로 설정되었음

### 3. 열거 가능 여부 (enumerable)

:for…in 루프나 Object.keys 등을 사용해 프로퍼티를 열거할 수 있는지 여부를 나타낸다 

- 예도 BOOLEAN 값을 가짐
- [[enumerable]] 의 값이 false인 경우 해당 프로퍼티는 for…in 문이나 Object.keys 메서드 등으로 열거할 수 없다

```jsx
let obj = {
  name: 'John'
};
Object.defineProperty(obj, 'name', { enumerable: false });
```

for (let key in obj) { console.log(key); } 'name'이 출력되지 않음

### 4. 설정 가능여부 (configurable)

:프로퍼티의 속성을 변경하거나 프로퍼티를 삭제할 수 있는지 여부를 나타냄

- 불리언 갑 ㅅ가짐
- configurable 의 값이 false 인 경우 프로퍼티의 삭제, 프로퍼티 어트리뷰트 값의 변경이 금지된다.
- 단 [[writable]]이 True인 경우 [[value]]의 변경과 [[writable]]을 false로 변경하는 것은 허용한다

```jsx
let obj = {
  name: 'John'
};
Object.defineProperty(obj, 'name', { configurable: false });
```

delete obj.name; 에러 발생, 설정 불가능한 프로퍼티로 설정되었음

# 16.3.2 접근자 프로퍼티

접근자 프로퍼티는 자체적으로 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 사용하는 접근자 함수로 구성된 프로퍼티